(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{2380:function(e,t,r){Promise.resolve().then(r.bind(r,2374))},2374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(3827),a=r(4090),i=r(703),s=r(8792),o=r(4232),l=r(716),c=r(4344),d=r(2829),u=r(2966);function h(e){let{isOpen:t,onClose:r,onBuy:i}=e,{contractService:s,error:o}=(0,l.useContractContext)(),[h,m]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[w,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{v(!0)},[]);let N=async()=>{if(!p){f("Please connect your wallet first");return}if(!s){f("Contract service not initialized");return}y(!0),f(null);try{let e=new c.ZPm(window.ethereum),t=new e.eth.Contract([{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],type:"function"}],d.xk.TESTNET.TUSDT),n=e.utils.toWei(h,"ether");await t.methods.approve(d.xk.TESTNET.LOGIC,n).send({from:p}),await s.buyTSC(n),i(Number(h)),r()}catch(e){console.error("Purchase failed:",e),f(e instanceof Error?e.message:"Purchase failed")}finally{y(!1)}};return w&&t?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:r}),(0,n.jsxs)("div",{className:"relative bg-black/90 rounded-xl border border-white/10 p-8 max-w-md w-full",children:[(0,n.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-brand-cyan to-brand-pink rounded-xl blur opacity-30"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Buy TSC Tokens"}),(0,n.jsx)("div",{className:"space-y-6",children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-black/50 border border-white/10 rounded-lg p-4",children:[(0,n.jsx)("span",{className:"block text-sm text-gray-400",children:"Connected Wallet"}),(0,n.jsxs)("span",{className:"block text-white font-mono",children:[p.slice(0,6),"...",p.slice(-4)]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-lg font-medium text-gray-300 mb-3",children:"Amount (USDT)"}),(0,n.jsx)("input",{type:"number",value:h,onChange:e=>m(e.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg px-6 py-4 text-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-cyan/50",placeholder:"Enter amount"}),(0,n.jsxs)("span",{className:"block mt-2 text-sm text-gray-400",children:["You will receive: ",h?Number(h)/.05:0," TSC"]})]}),(0,n.jsxs)("button",{onClick:N,disabled:b||!h,className:"relative w-full group disabled:opacity-50",children:[(0,n.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-brand-cyan to-brand-pink rounded-lg blur opacity-60 group-hover:opacity-100 transition"}),(0,n.jsx)("div",{className:"relative w-full px-8 py-4 bg-black rounded-lg leading-none flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-xl font-medium text-white",children:b?"Processing...":"Buy TSC"})})]}),g&&(0,n.jsx)("div",{className:"p-4 rounded-lg border border-red-500/50 bg-red-500/10",children:(0,n.jsx)("span",{className:"text-sm text-red-400",children:g})}),o&&(0,n.jsx)("div",{className:"p-4 rounded-lg border border-red-500/50 bg-red-500/10",children:(0,n.jsx)("span",{className:"text-sm text-red-400",children:o})})]}):(0,n.jsx)(u.Z,{onConnect:e=>{x(e),f(null)}})}),(0,n.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}):null}var m=(0,o.default)(()=>Promise.resolve(h),{ssr:!1});function p(){let[e]=(0,a.useState)({username:"cryptouser123",email:"user@example.com",tscHoldings:"5000",referralInfluencer:"@topinfluencer",walletAddress:"0x1234...5678"}),[t]=(0,a.useState)([{id:1,type:"purchase",amount:"1000 TSC",price:"50 USDT",date:"2024-02-20",status:"completed"},{id:2,type:"referral_bonus",amount:"100 TSC",from:"@topinfluencer",date:"2024-02-18",status:"completed"}]),[r,o]=(0,a.useState)(!1),l=async e=>{console.log("Buying ".concat(e," worth of TSC"))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"min-h-screen bg-black font-sans antialiased",children:[(0,n.jsx)("nav",{className:"fixed w-full z-50 backdrop-blur-md bg-black/20 border-b border-white/5",children:(0,n.jsx)("div",{className:"w-full px-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,n.jsxs)(s.default,{href:"/",className:"flex items-center gap-4 group",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute -inset-1.5 bg-gradient-to-r from-brand-cyan to-brand-pink rounded-full blur-md opacity-40 group-hover:opacity-75 transition-opacity"}),(0,n.jsx)(i.default,{src:"/images/logo.png",alt:"TikStar Logo",width:56,height:56,priority:!0,className:"relative transform hover:scale-105 transition-all duration-300"})]}),(0,n.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent",children:"TikStar"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsx)("button",{className:"text-gray-400 hover:text-white transition-colors",children:"Settings"}),(0,n.jsx)("button",{className:"text-gray-400 hover:text-white transition-colors",children:"Logout"})]})]})})}),(0,n.jsx)("div",{className:"pt-32 px-8",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto space-y-12",children:[(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-white to-gray-400 rounded-xl blur opacity-75"}),(0,n.jsx)("div",{className:"relative bg-black/50 backdrop-blur-sm border border-white/10 rounded-xl p-8",children:(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsx)("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-2 border-white/50",children:(0,n.jsx)("div",{className:"w-full h-full bg-white/20 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-4xl text-white",children:e.username.charAt(0).toUpperCase()})})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:e.username}),(0,n.jsxs)("div",{className:"text-gray-400",children:["Wallet: ",e.walletAddress]})]}),(0,n.jsxs)("div",{className:"ml-auto text-right",children:[(0,n.jsx)("div",{className:"text-gray-400",children:"TSC Holdings"}),(0,n.jsx)("div",{className:"text-4xl font-bold text-white",children:e.tscHoldings})]})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("button",{onClick:()=>{o(!0)},className:"relative group",children:[(0,n.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-brand-cyan to-brand-pink rounded-lg blur opacity-50 group-hover:opacity-100 transition"}),(0,n.jsxs)("div",{className:"relative bg-black/50 backdrop-blur-sm border border-white/10 rounded-lg p-8 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Buy TSC"}),(0,n.jsx)("p",{className:"text-gray-400",children:"Current price: 0.05 USDT"})]}),(0,n.jsx)("svg",{className:"w-8 h-8 text-brand-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]})]}),(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-white to-gray-400 rounded-lg blur opacity-50"}),(0,n.jsxs)("div",{className:"relative bg-black/50 backdrop-blur-sm border border-white/10 rounded-lg p-8",children:[(0,n.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Referral Influencer"}),(0,n.jsx)("p",{className:"text-gray-400",children:e.referralInfluencer||"Not connected"})]})]})]}),(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-white to-gray-400 rounded-xl blur opacity-75"}),(0,n.jsxs)("div",{className:"relative bg-black/50 backdrop-blur-sm border border-white/10 rounded-xl p-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Transaction History"}),(0,n.jsx)("button",{className:"text-gray-400 hover:text-white transition-colors",children:"View All"})]}),(0,n.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border border-white/10 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"text-xl text-white capitalize",children:e.type.replace("_"," ")}),(0,n.jsx)("div",{className:"text-brand-cyan",children:e.amount}),e.price&&(0,n.jsxs)("div",{className:"text-gray-400",children:["(",e.price,")"]}),e.from&&(0,n.jsxs)("div",{className:"text-gray-400",children:["From: ",e.from]}),(0,n.jsx)("div",{className:"text-gray-400",children:e.date})]}),(0,n.jsx)("div",{className:"px-3 py-1 rounded-full text-sm ".concat("completed"===e.status?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:e.status})]},e.id))})]})]})]})})]}),(0,n.jsx)(m,{isOpen:r,onClose:()=>o(!1),onBuy:l})]})}},716:function(e,t,r){"use strict";r.r(t),r.d(t,{ContractProvider:function(){return d},useContractContext:function(){return u}});var n=r(3827),a=r(4090),i=r(4344),s=r(2829);class o{initializeContract(e){try{this.contract=new this.web3.eth.Contract(e,s.xk.TESTNET.LOGIC)}catch(e){console.error("Failed to initialize contract:",e)}}async joinExpert(e,t){try{if(!this.contract)throw Error("Contract not initialized");let r=await this.web3.eth.getAccounts();return await this.contract.methods[s.ti.JOIN_EXPERT](e,t).send({from:r[0]}),!0}catch(e){return console.error("Failed to join as expert:",e),!1}}async getExpertSize(){try{if(!this.contract)throw Error("Contract not initialized");let e=await this.contract.methods[s.ti.GET_EXPERT_SIZE]().call();return Number(e)}catch(e){return console.error("Failed to get expert size:",e),0}}async getExpertInfo(){try{if(!this.contract)throw Error("Contract not initialized");return await this.contract.methods[s.ti.GET_EXPERT_INFO]().call()}catch(e){return console.error("Failed to get expert info:",e),[]}}async acceptInvitation(e){try{if(!this.contract)throw Error("Contract not initialized");let t=await this.web3.eth.getAccounts();return await this.contract.methods[s.ti.ACCEPT_INVITATION](e).send({from:t[0]}),!0}catch(e){return console.error("Failed to accept invitation:",e),!1}}async getInvitationSize(e){try{if(!this.contract)throw Error("Contract not initialized");let t=await this.contract.methods[s.ti.GET_INVITATION_SIZE](e).call();return Number(t)}catch(e){return console.error("Failed to get invitation size:",e),0}}async getInvitationInfo(e){try{if(!this.contract)throw Error("Contract not initialized");return await this.contract.methods[s.ti.GET_INVITATION_INFO](e).call()}catch(e){return console.error("Failed to get invitation info:",e),[]}}async getBrandSize(){try{if(!this.contract)throw Error("Contract not initialized");let e=await this.contract.methods[s.ti.GET_BRAND_SIZE]().call();return Number(e)}catch(e){return console.error("Failed to get brand size:",e),0}}async getBrandInfo(){try{if(!this.contract)throw Error("Contract not initialized");return await this.contract.methods[s.ti.GET_BRAND_INFO]().call()}catch(e){return console.error("Failed to get brand info:",e),[]}}async buyTSC(e){try{if(!this.contract)throw Error("Contract not initialized");let t=await this.web3.eth.getAccounts();return await this.contract.methods[s.ti.BUY_TSC](e).send({from:t[0]}),!0}catch(e){return console.error("Failed to buy TSC:",e),!1}}constructor(e,t){this.web3=new i.ZPm(e),this.contract=null,this.initializeContract(t)}}var l=JSON.parse('[{"inputs":[{"internalType":"string","name":"tikTokId","type":"string"},{"internalType":"string","name":"email","type":"string"}],"name":"joinExpert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"upAddress","type":"address"}],"name":"acceptInvitation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"buy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getExpertSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getExpertInfo","outputs":[{"components":[{"internalType":"string","name":"tikTokId","type":"string"},{"internalType":"string","name":"email","type":"string"},{"internalType":"address","name":"_add","type":"address"}],"internalType":"struct TikStarCoin.Expert[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"address","type":"address"}],"name":"getInvitationSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"address","type":"address"}],"name":"getInvitationInfo","outputs":[{"components":[{"internalType":"address","name":"_add","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"internalType":"struct TikStarCoin.UserBuy[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBrandSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBrandInfo","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"remarks","type":"string"},{"internalType":"string","name":"logo","type":"string"}],"internalType":"struct TikStarCoin.Brand[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"}]');let c=(0,a.createContext)({contractService:null,error:null});function d(e){let{children:t}=e,[r,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(null);return(0,a.useEffect)(()=>((async()=>{try{if(void 0===window.ethereum)throw Error("Please install MetaMask to use this application");let e=await window.ethereum.request({method:"eth_requestAccounts"});if(!e||0===e.length)throw Error("Please connect your MetaMask wallet");let t=await window.ethereum.request({method:"eth_chainId"});if(97!==parseInt(t,16))throw Error("Please switch to BSC Testnet (Chain ID: 97)");let r=new i.ZPm(window.ethereum),n=new o(window.ethereum,l),a=await r.eth.getCode(s.xk.TESTNET.LOGIC);if("0x"===a||"0x0"===a)throw Error("Contract not deployed at specified address");d(n),h(null)}catch(e){h(e instanceof Error?e.message:"Failed to initialize contract service"),console.error("Contract initialization error:",e)}})(),window.ethereum&&(window.ethereum.on("chainChanged",()=>{window.location.reload()}),window.ethereum.on("accountsChanged",()=>{window.location.reload()})),()=>{window.ethereum&&(window.ethereum.removeListener("chainChanged",()=>{}),window.ethereum.removeListener("accountsChanged",()=>{}))}),[]),(0,n.jsx)(c.Provider,{value:{contractService:r,error:u},children:t})}function u(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useContractContext must be used within a ContractProvider");return e}}},function(e){e.O(0,[250,607,714,162,971,69,744],function(){return e(e.s=2380)}),_N_E=e.O()}]);